<html> 
      <head>
        <title>GAP (ref) - Chapter 79: Creating New Objects-&gt;79.12 Implementing New List Objects</title>
        <meta name="url" content="http://www.gap-system.org/Manuals/doc/ref/chap79.html#X82309B3F81DD2237"></meta>
      </head>
      <body> <h4 xmlns="http://www.w3.org/1999/xhtml">79.12 <span class="Heading">Implementing New List Objects</span></h4><p xmlns="http://www.w3.org/1999/xhtml">This section gives some hints for the quite usual situation that one wants to implement new objects that are lists. More precisely, one either wants to deal with lists that have additional features, or one wants that some objects also behave as lists. An example can be found in<a shape="rect" href="chap79_mj.html#X849D8BC278649EA5"><span class="RefLink">79.13</span></a>.</p><p xmlns="http://www.w3.org/1999/xhtml">A <em>list</em> in <strong class="pkg">GAP</strong> is an object in the category <code class="func">IsList</code> (<a shape="rect" href="chap21_mj.html#X7C4CC4EA8299701E"><span class="RefLink">21.1-1</span></a>). Basic operations for lists are <code class="func">Length</code> (<a shape="rect" href="chap21_mj.html#X780769238600AFD1"><span class="RefLink">21.17-5</span></a>), <code class="func">\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>), and <code class="func">IsBound\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>) (see<a shape="rect" href="chap21_mj.html#X7B202D147A5C2884"><span class="RefLink">21.2</span></a>).</p><p xmlns="http://www.w3.org/1999/xhtml">Note that the access to the position <var class="Arg">pos</var> in the list <var class="Arg">list</var> via <code class="code"><var class="Arg">list</var>[<var class="Arg">pos</var>]</code> is handled by the call <code class="code">\[\]( <var class="Arg">list</var>, <var class="Arg">pos</var> )</code> to the operation <code class="func">\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>). To explain the somewhat strange name <code class="code">\[\]</code> of this operation, note that non-alphanumeric characters like <code class="code">[</code> and <code class="code">]</code> may occur in <strong class="pkg">GAP</strong> variable names only if they are escaped by a <code class="code">\</code> character.</p><p xmlns="http://www.w3.org/1999/xhtml">Analogously, the check <code class="code">IsBound( <var class="Arg">list</var>[<var class="Arg">pos</var>] )</code> whether the position <var class="Arg">pos</var> of the list <var class="Arg">list</var> is bound is handled by the call <code class="code">IsBound\[\]( <var class="Arg">list</var>, <var class="Arg">pos</var> )</code> to the operation <code class="func">IsBound\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>).</p><p xmlns="http://www.w3.org/1999/xhtml">For mutable lists, also assignment to positions and unbinding of positions via the operations <code class="func">\[\]\:\=</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>) and <code class="func">Unbind\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>) are basic operations. The assignment <code class="code"><var class="Arg">list</var>[<var class="Arg">pos</var>]:= <var class="Arg">val</var></code> is handled by the call <code class="code">\[\]\:\=( <var class="Arg">list</var>, <var class="Arg">pos</var>, <var class="Arg">val</var> )</code>, and <code class="code">Unbind( <var class="Arg">list</var>[<var class="Arg">pos</var>] )</code> is handled by the call <code class="code">Unbind\[\]( <var class="Arg">list</var>, <var class="Arg">pos</var> )</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">All other operations for lists, e.g., <code class="func">Add</code> (<a shape="rect" href="chap21_mj.html#X795EC9D67E34DAB0"><span class="RefLink">21.4-2</span></a>), <code class="func">Append</code> (<a shape="rect" href="chap21_mj.html#X79E31DB27C82D6E1"><span class="RefLink">21.4-5</span></a>), <code class="func">Sum</code> (<a shape="rect" href="chap21_mj.html#X7A04B71C84CFCC2D"><span class="RefLink">21.20-26</span></a>), are based on these operations. This means that it is sufficient to install methods for the new list objects only for the basic operations.</p><p xmlns="http://www.w3.org/1999/xhtml">So if one wants to implement new list objects then one creates them as objects in the category <code class="func">IsList</code> (<a shape="rect" href="chap21_mj.html#X7C4CC4EA8299701E"><span class="RefLink">21.1-1</span></a>), and installs methods for <code class="func">Length</code> (<a shape="rect" href="chap21_mj.html#X780769238600AFD1"><span class="RefLink">21.17-5</span></a>), <code class="func">\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>), and <code class="func">IsBound\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>). If the new lists shall be mutable, one needs to install also methods for <code class="func">\[\]\:\=</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>) and <code class="func">Unbind\[\]</code> (<a shape="rect" href="chap21_mj.html#X8297BBCD79642BE6"><span class="RefLink">21.2-1</span></a>).</p><p xmlns="http://www.w3.org/1999/xhtml">One application for this is the implementation of <em>enumerators</em> for domains. An enumerator for the domain <math id="7787786709882431689" display="inline" alttext="D" class="ltx_Math" xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics id="p1.1.m1.1a">
    <mi xref="p1.1.m1.1.1.cmml" id="p1.1.m1.1.1">D</mi>
    <annotation-xml id="p1.1.m1.1b" encoding="MathML-Content">
      <ci xref="p1.1.m1.1.1" id="p1.1.m1.1.1.cmml">洧냥</ci>
    </annotation-xml>
    <annotation id="p1.1.m1.1c" encoding="application/x-tex">D</annotation>
  </semantics>
</math> is a dense list whose entries are in bijection with the elements of <math id="8860610177910049799" display="inline" alttext="D" class="ltx_Math" xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics id="p1.1.m1.1a">
    <mi xref="p1.1.m1.1.1.cmml" id="p1.1.m1.1.1">D</mi>
    <annotation-xml id="p1.1.m1.1b" encoding="MathML-Content">
      <ci xref="p1.1.m1.1.1" id="p1.1.m1.1.1.cmml">洧냥</ci>
    </annotation-xml>
    <annotation id="p1.1.m1.1c" encoding="application/x-tex">D</annotation>
  </semantics>
</math>. If <math id="8127316889826903975" display="inline" alttext="D" class="ltx_Math" xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics id="p1.1.m1.1a">
    <mi xref="p1.1.m1.1.1.cmml" id="p1.1.m1.1.1">D</mi>
    <annotation-xml id="p1.1.m1.1b" encoding="MathML-Content">
      <ci xref="p1.1.m1.1.1" id="p1.1.m1.1.1.cmml">洧냥</ci>
    </annotation-xml>
    <annotation id="p1.1.m1.1c" encoding="application/x-tex">D</annotation>
  </semantics>
</math> is large then it is not useful to write down all elements. Instead one can implement such a bijection implicitly. This works also for infinite domains.</p><p xmlns="http://www.w3.org/1999/xhtml">In this situation, one implements a new representation of the lists that are already available in <strong class="pkg">GAP</strong>, in particular the family of such a list is the same as the family of the domain <math id="5044197570152912016" display="inline" alttext="D" class="ltx_Math" xmlns="http://www.w3.org/1998/Math/MathML">
  <semantics id="p1.1.m1.1a">
    <mi xref="p1.1.m1.1.1.cmml" id="p1.1.m1.1.1">D</mi>
    <annotation-xml id="p1.1.m1.1b" encoding="MathML-Content">
      <ci xref="p1.1.m1.1.1" id="p1.1.m1.1.1.cmml">洧냥</ci>
    </annotation-xml>
    <annotation id="p1.1.m1.1c" encoding="application/x-tex">D</annotation>
  </semantics>
</math>.</p><p xmlns="http://www.w3.org/1999/xhtml">But it is also possible to implement new kinds of lists that lie in new families, and thus are not equal to lists that were available in <strong class="pkg">GAP</strong> before. An example for this is the implementation of matrices whose multiplication via &quot;<code class="code">*</code>&quot; is the Lie product of matrices.</p><p xmlns="http://www.w3.org/1999/xhtml">In this situation, it makes no sense to put the new matrices into the same family as the original matrices. Note that the product of two Lie matrices shall be defined but not the product of an ordinary matrix and a Lie matrix. So it is possible to have two lists that have the same entries but that are not equal w.r.t. &quot;<code class="code">=</code>&quot; because they lie in different families.</p> </body>
    </html>